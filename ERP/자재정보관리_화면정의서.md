# 자재 정보 관리 - 화면 정의서

## 1. 화면 개요

### 1.1 기본 정보
- **화면명**: 자재 정보 관리
- **목적**: 자재 마스터 데이터 관리, 자재 품목 등록/수정, 자재 세트 관리

---

## 2. 탭 구조

### 2.1 탭 구성
**2개의 탭으로 구성:**
- 자재 품목 (기본)
- 자재 세트 관리

**탭 전환:**
- 탭 클릭 시 해당 컨텐츠 표시
- 이전 탭 숨김
- 활성 탭 스타일 변경

---

# 탭 1: 자재 품목

## 3. 초기 로드

### 3.1 초기 데이터 로드
- 전체 자재 마스터 목록 조회
- 자재 코드순 정렬
- 페이징: 50건씩

### 3.2 초기 화면 상태
- 카테고리 필터: "카테고리 전체" 선택
- 제조사 필터: "제조사 전체" 선택
- 검색어: 비어있음
- 요약 영역: 통계 표시

---

## 4. 검색/필터 영역

### 4.1 카테고리 필터
**필터 옵션:**
- 카테고리 전체 (기본값)
- CCTV
- 네트워크
- 센서
- 케이블
- 기타

**동작:**
- 드롭다운 선택 시 즉시 필터 적용

---

### 4.2 제조사 필터
**필터 옵션:**
- 제조사 전체 (기본값)
- 등록된 제조사 목록

**동작:**
- 드롭다운 선택 시 즉시 필터 적용

---

### 4.3 검색 기능
**검색 대상:**
- 자재명
- 자재 코드
- 제조사
- 통합 검색 (OR 조건)

**[검색] 버튼 클릭 시:**
- 검색 실행
- 결과 테이블 업데이트

---

### 4.4 초기화 기능
**[초기화] 버튼 클릭 시:**
- 모든 필터 "전체"로 리셋
- 검색 입력 필드 초기화
- 전체 목록 재조회

---

## 5. 요약 영역

### 5.1 통계 표시
```
전체 자재: 1,234개 | 카테고리: 15개
```

**특징:**
- 실시간 업데이트 (등록/수정/삭제 시)

---

### 5.2 [+ 새 자재 등록] 버튼
**위치:** 요약 영역 우측

**클릭 시:**
- 자재 등록 모달 오픈
- 폼 필드 초기화

---

## 6. 목록 테이블

### 6.1 컬럼 구조
| 컬럼명 | 표시 내용 | 비고 |
|--------|----------|------|
| 자재 코드 | CAM-001 | 굵게 표시 |
| 카테고리 | CCTV | |
| 자재명 | IP카메라 2MP 실외형 | |
| 규격/사양 | 2MP, 1920x1080, IP67 | |
| 제조사 | 한화테크윈 | |
| 모델명 | XNO-6120R | |
| 단위 | EA / 박스 / 세트 / 미터 | |
| 단가 | 350,000원 | 천단위 구분 |
| 작업 | [수정] [삭제] 버튼 | |

---

### 6.2 행 클릭
**트리거:** 테이블 행 클릭

**동작:**
- 자재 상세 모달 오픈
- 자재 정보 로드

**예외:**
- "작업" 컬럼의 버튼 클릭 시에는 행 클릭 무시

---

### 6.3 [수정] 버튼
**위치:** 작업 컬럼

**클릭 시:**
- 자재 수정 모달 오픈
- 기존 자재 정보 폼에 로드

---

### 6.4 [삭제] 버튼
**위치:** 작업 컬럼

**클릭 시:**
- 확인 메시지: "이 자재를 삭제하시겠습니까?"
- 확인 시: 삭제 처리
- 취소 시: 유지

**삭제 가능 조건:**
- 해당 자재가 어디에도 사용되지 않은 경우
- 재고가 0인 경우
- 발주/출고 이력이 없는 경우

**삭제 불가 시:**
- 에러 메시지: "사용 중인 자재는 삭제할 수 없습니다"

---

## 7. 자재 상세 모달

### 7.1 오픈 조건
- 테이블 행 클릭

---

### 7.2 표시 정보
**자재 기본 정보:**
- 자재 코드
- 자재명
- 카테고리
- 제조사
- 모델명
- 단가
- 단위
- 규격/사양
- 안전재고
- 납기 소요일
- 시리얼 관리 (사용/미사용)

---

### 7.3 [수정] 버튼
**위치:** 모달 하단

**클릭 시:**
- 상세 모달 닫기
- 자재 수정 모달 오픈

---

### 7.4 [닫기] 버튼
**동작:**
- 모달 닫기

---

## 8. 자재 등록 모달

### 8.1 모달 오픈
**트리거:**
- [+ 새 자재 등록] 버튼 클릭

---

### 8.2 입력 필드

**필수 입력 (*):**
- 카테고리* (드롭다운)
- 자재명*
- 단위* (드롭다운)
- 단가*

**선택 입력:**
- 제조사
- 모델명
- 규격/사양
- 시리얼 관리 (라디오 버튼: 사용/미사용, 기본값: 미사용)
- 안전재고 수량 (기본값: 0)
- 납기 소요일 (기본값: 7)
- 설명

---

### 8.3 카테고리 선택
**드롭다운 옵션:**
- CCTV
- 네트워크
- 센서
- 케이블
- 기타

---

### 8.4 단위 선택
**드롭다운 옵션:**
- 개 (EA)
- 박스
- 세트
- 미터

---

### 8.5 시리얼 관리
**라디오 버튼:**
- 미사용 (기본값)
- 사용

**설명:**
- **사용**: 개별 자재 추적 필요 (카메라, NVR 등)
- **미사용**: 수량만 관리 (케이블, 소모품 등)

---

### 8.6 [저장] 버튼

**유효성 검증:**

**1단계: 필수 필드 검증**
- 카테고리 선택 확인
- 자재명 입력 확인
- 단위 선택 확인
- 단가 입력 확인 (0보다 큰 값)

**동작 순서:**
1. 필수 필드 검증
2. 자재 등록 처리
3. 자재 코드 자동 생성
   - 형식: 카테고리약어 + - + 일련번호
   - 예: CAM-001, NVR-016, SW-024P
4. 성공 알림: "자재가 등록되었습니다"
5. 모달 닫기
6. 목록 갱신

---

### 8.7 [취소] 버튼
**동작:**
- 확인 메시지: "입력한 내용이 사라집니다. 취소하시겠습니까?"
- 확인 시: 모달 닫기
- 취소 시: 모달 유지

---

## 9. 자재 수정 모달

### 9.1 모달 오픈
**트리거:**
- 목록의 [수정] 버튼 클릭
- 상세 모달의 [수정] 버튼 클릭

**초기 데이터:**
- 기존 자재 정보를 폼에 자동 입력

---

### 9.2 입력 필드
**자재 등록과 동일**
- 모든 필드 수정 가능
- 자재 코드는 변경 불가 (읽기 전용)

---

### 9.3 [저장] 버튼

**유효성 검증:**
- 자재 등록과 동일

**동작 순서:**
1. 필수 필드 검증
2. 수정 처리
3. 성공 알림: "자재 정보가 수정되었습니다"
4. 모달 닫기
5. 목록 갱신

---

### 9.4 [취소] 버튼
**동작:**
- 확인 메시지: "수정을 취소하시겠습니까?"
- 확인 시: 모달 닫기
- 취소 시: 모달 유지

---

# 탭 2: 자재 세트 관리

## 10. 자재 세트 탭

### 10.1 초기 데이터 로드
- 전체 자재 세트 목록 조회
- 작성일순 정렬

### 10.2 초기 화면 상태
- 요약 영역: 통계 표시

---

## 11. 요약 영역 (세트)

### 11.1 통계 표시
```
전체 세트: 3개 | 총 자재 종류: 19종
```

**통계 항목:**
- **전체 세트**: 등록된 세트 개수
- **총 자재 종류**: 모든 세트에 포함된 자재 종류 합계

---

## 12. 목록 테이블 (세트)

### 12.1 컬럼 구조
| 컬럼명 | 표시 내용 |
|--------|----------|
| 세트 코드 | SET-001 |
| 세트명 | 표준 CCTV 세트 (16채널) |
| 자재 수 | 8종 |
| 작성일 | 2024-01-10 |
| 작업 | [수정] 버튼 |

---

### 12.2 행 클릭
**트리거:** 테이블 행 클릭

**동작:**
- 세트 상세 모달 오픈
- 세트 정보 및 구성 자재 로드

---

### 12.3 [수정] 버튼
**위치:** 작업 컬럼

**클릭 시:**
- 세트 수정 모달 오픈
- 기존 세트 정보 폼에 로드

---

## 13. 세트 상세 모달

### 13.1 오픈 조건
- 세트 테이블 행 클릭

---

### 13.2 표시 정보

**세트 기본 정보:**
- 세트 코드
- 세트명
- 자재 수
- 작성일

**구성 자재 목록 (테이블):**
| 자재명 | 규격 | 수량 | 단위 |
|--------|------|------|------|

**예시:**
```
IP카메라 2MP 실외형 | 2MP, 1920x1080, IP67 | 50 | 개
IP카메라 4MP 실내형 | 4MP, 2560x1440 | 20 | 개
NVR 16채널 | 16CH, H.265, 4TB | 10 | 개
...
```

---

### 13.3 [닫기] 버튼
**동작:**
- 모달 닫기

---

## 14. 세트 등록/수정 모달

### 14.1 모달 오픈
**트리거:**
- 세트 목록의 [수정] 버튼 클릭 (수정 모드)
- (향후) [+ 새 세트 등록] 버튼 클릭 (등록 모드)

---

### 14.2 입력 필드

**필수 입력 (*):**
- 세트명*
- 구성 자재* (최소 1개 이상)

**선택 입력:**
- 없음

---

### 14.3 구성 자재 추가

**입력 영역:**
- 자재 검색 입력 (Autocomplete)
- [+ 추가] 버튼

**동작:**
1. 자재명 입력 시 자동완성 드롭다운 표시
2. 자재 선택
3. [+ 추가] 버튼 클릭
4. 구성 자재 테이블에 행 추가
5. 수량 입력 (기본값: 1)

---

### 14.4 구성 자재 테이블

**컬럼:**
| 순서 | 자재명 | 수량 | 단위 | 삭제 |
|------|--------|------|------|------|

**기능:**
- **순서**: 드래그 앤 드롭으로 순서 변경 가능 (선택)
- **자재명**: 선택한 자재명 표시
- **수량**: 직접 입력 (1 이상)
- **단위**: 자동 표시 (자재 마스터 기준)
- **삭제**: [X] 버튼으로 행 삭제

---

### 14.5 [저장] 버튼

**유효성 검증:**

**1단계: 필수 필드 검증**
- 세트명 입력 확인
- 구성 자재 1개 이상 확인

**2단계: 자재 수량 검증**
- 모든 자재 수량 ≥ 1 확인

**동작 순서:**
1. 필수 필드 검증
2. 자재 수량 검증
3. 세트 저장 처리
4. 세트 코드 자동 생성 (등록 시)
   - 형식: SET + - + 일련번호
   - 예: SET-001
5. 성공 알림: "세트가 저장되었습니다"
6. 모달 닫기
7. 세트 목록 갱신

---

### 14.6 [취소] 버튼
**동작:**
- 확인 메시지: "작성 중인 내용이 사라집니다. 취소하시겠습니까?"
- 확인 시: 모달 닫기
- 취소 시: 모달 유지

---

## 15. 유효성 검증 규칙

### 15.1 자재 등록/수정 필수 필드
- 카테고리 선택
- 자재명 입력
- 단위 선택
- 단가 입력 (0보다 큰 값)

---

### 15.2 단가 검증
- 숫자만 입력 가능
- 0보다 큰 값
- 최대: 999,999,999원

---

### 15.3 안전재고/납기 검증
- 숫자만 입력 가능
- 0 이상

---

### 15.4 세트 필수 필드
- 세트명 입력
- 구성 자재 1개 이상

---

### 15.5 세트 자재 수량 검증
- 모든 자재 수량 ≥ 1
- 0 이하 시: "수량은 1 이상이어야 합니다"

---

## 16. 상태 정의

### 16.1 시리얼 관리 상태

| 값 | 설명 |
|------|------|
| 사용 | 개별 추적 필요한 자재 (카메라, NVR 등) |
| 미사용 | 수량만 관리하는 자재 (케이블, 소모품 등) |

---

## 17. 에러 처리

### 17.1 사용자 입력 오류

| 상황 | 메시지 | 동작 |
|------|--------|------|
| 필수 필드 누락 | "필수 항목을 입력해주세요" | 해당 필드 포커스 |
| 단가 0 이하 | "단가는 0보다 커야 합니다" | 단가 필드 포커스 |
| 세트 자재 미추가 | "구성 자재를 추가해주세요" | - |
| 세트 자재 수량 0 | "수량은 1 이상이어야 합니다" | 수량 필드 포커스 |

---

### 17.2 자재 삭제 오류

| 상황 | 메시지 |
|------|--------|
| 사용 중인 자재 | "사용 중인 자재는 삭제할 수 없습니다" |
| 재고 존재 | "재고가 있는 자재는 삭제할 수 없습니다" |
| 발주/출고 이력 존재 | "발주 또는 출고 이력이 있는 자재는 삭제할 수 없습니다" |

---

## 18. 비즈니스 규칙

### 18.1 자재 코드 생성
- 자동 생성 (수동 입력 불가)
- 형식: 카테고리약어 + - + 일련번호
- 예시:
  - CCTV: CAM-001
  - 녹화기: NVR-016
  - 네트워크: SW-024P
  - 케이블: CBL-001

**카테고리별 약어:**
- CCTV: CAM
- 녹화기: NVR
- 모니터: MON
- 네트워크: SW
- 센서: SEN
- 케이블: CBL
- 기타: ETC

---

### 18.2 세트 코드 생성
- 자동 생성 (수동 입력 불가)
- 형식: SET + - + 일련번호
- 예: SET-001, SET-002

---

### 18.3 자재 삭제 조건
**삭제 가능:**
- 재고가 0인 경우
- 발주 이력이 없는 경우
- 출고 이력이 없는 경우
- 세트에 포함되지 않은 경우

**삭제 불가:**
- 위 조건 중 하나라도 해당하지 않으면 삭제 불가
- 에러 메시지로 사유 안내

---

### 18.4 시리얼 관리 자재
**시리얼 관리 사용:**
- 개별 추적 필요한 고가 자재
- 예: 카메라, NVR, 모니터

**출고 시:**
- 시리얼 번호 필수 선택
- 시리얼별 위치 추적

**시리얼 관리 미사용:**
- 수량만 관리
- 예: 케이블, 브라켓, 케이블 타이

---

### 18.5 자재 세트 활용
**용도:**
- 견적 작성 시 세트 단위 자재 추가
- 발주 시 세트 단위 발주 가능
- 표준 구성 관리

**예시:**
- 표준 CCTV 세트 (16채널)
- 네트워크 기본 구성
- 센서 패키지

---

## 19. 화면 흐름도

### 19.1 자재 등록 흐름
```
[+ 새 자재 등록] 클릭
    ↓
자재 등록 모달 오픈
    ↓
카테고리 선택
    ↓
자재명 입력
    ↓
단위 선택
    ↓
단가 입력
    ↓
제조사/모델명/규격 입력 (선택)
    ↓
시리얼 관리 선택
    ↓
안전재고/납기 입력 (선택)
    ↓
[저장] 클릭
    ↓
필수 필드 검증
    ↓
자재 등록 처리
    ↓
자재 코드 자동 생성
    ↓
성공 알림
    ↓
목록 갱신
```

---

### 19.2 세트 등록 흐름
```
[새 세트 등록] 클릭
    ↓
세트 등록 모달 오픈
    ↓
세트명 입력
    ↓
자재 검색 (Autocomplete)
    ↓
자재 선택
    ↓
[+ 추가] 클릭
    ↓
구성 자재 테이블에 행 추가
    ↓
수량 입력
    ↓
(자재 추가 반복)
    ↓
순서 조정 (드래그 앤 드롭, 선택)
    ↓
[저장] 클릭
    ↓
필수 필드 검증
    ↓
자재 수량 검증
    ↓
세트 저장 처리
    ↓
세트 코드 자동 생성
    ↓
성공 알림
    ↓
세트 목록 갱신
```

---

## 20. 개발 체크리스트

### 20.1 필수 구현 사항

**탭 1: 자재 품목**
- [ ] 자재 목록 조회 (페이징)
- [ ] 검색 (자재명/코드/제조사)
- [ ] 다중 필터 (카테고리/제조사)
- [ ] 자재 등록 모달
- [ ] 자재 수정 모달
- [ ] 자재 상세 모달
- [ ] 자재 삭제 (조건 검증)

**탭 2: 자재 세트 관리**
- [ ] 세트 목록 조회
- [ ] 세트 상세 모달
- [ ] 세트 등록/수정 모달
- [ ] 자재 Autocomplete 검색
- [ ] 구성 자재 추가/삭제
- [ ] 순서 변경 (드래그 앤 드롭, 선택)

---

### 20.2 유효성 검증
- [ ] 필수 필드 검증
- [ ] 단가 > 0 검증
- [ ] 세트 자재 1개 이상 검증
- [ ] 세트 자재 수량 ≥ 1 검증
- [ ] 자재 삭제 조건 검증

---

### 20.3 사용자 경험
- [ ] 탭 전환 부드럽게
- [ ] Autocomplete 반응 빠르게
- [ ] 드래그 앤 드롭 직관적으로 (선택)
- [ ] 성공/실패 알림 명확히

---

### 20.4 비즈니스 로직
- [ ] 자재 코드 자동 생성 (카테고리별)
- [ ] 세트 코드 자동 생성
- [ ] 자재 삭제 조건 검증
- [ ] 시리얼 관리 자재 구분

---

## 21. 주의사항

### 21.1 반드시 지켜야 할 사항
1. **자재 삭제 조건 엄격히 검증** ⭐⭐⭐
   - 사용 중인 자재 삭제 방지
   - 재고/발주/출고 이력 확인
   
2. **자재 코드 중복 방지**
   - 카테고리별 일련번호 관리
   
3. **시리얼 관리 설정 신중히**
   - 한 번 설정 후 변경 어려움
   - 출고 프로세스에 영향

---

### 21.2 사용자 경험 개선
1. Autocomplete 검색 빠르게
2. 드래그 앤 드롭 직관적으로
3. 에러 메시지 명확히
4. 삭제 전 확인 메시지 명확히

---

### 21.3 데이터 일관성
1. 자재 코드 중복 방지
2. 세트 코드 중복 방지
3. 자재 삭제 시 세트 확인
4. 시리얼 관리 일관성 유지

---

## 22. 참고 사항

### 22.1 향후 개선 사항
- Excel 업로드 일괄 등록
- 자재 복사 기능
- 자재 이미지 업로드
- 자재 사용 이력 조회
- 세트 복사 기능
- 세트 Excel 다운로드

---

### 22.2 관련 화면
- 발주 관리: 자재 마스터 참조
- 입고 관리: 자재 정보 연동
- 출고 관리: 시리얼 관리 자재 구분
- 재고 관리: 안전재고 기준
- 견적 관리: 세트 활용

---

### 22.3 자재 마스터 데이터
**중요성:**
- 모든 화면의 기준 데이터
- 정확성 매우 중요
- 초기 구축 시 충분한 검토 필요

**유지보수:**
- 정기적인 데이터 정리
- 미사용 자재 아카이빙
- 제조사/모델명 표준화

---

**작성일:** 2026-02-11  
**작성자:** 기획팀  
**버전:** 1.0 (비즈니스 로직 중심)
